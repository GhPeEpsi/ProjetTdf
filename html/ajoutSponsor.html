<!DOCTYPE html>
<html lang="fr">
	<head>
    	<meta charset="utf-8">
    	<meta name ="viewport" content="width=device-width, initial-scale=1">
    	<title>Ajout sponsor</title>
    	<script> 
    		function chargerNom(elt1){
    			alert('salut1');
    			var nom = elt1.value;
	    		var xhr = new XMLHttpRequest();
				xhr.open('GET', '../php/ajoutSponsor.php?nom='+nom, true);

					var Lire = function()
					{
						if (xhr.readyState === 4 && xhr.status === 200)
						{
							var elt = document.getElementById('nomAbrege');
							document.getElementById('nomAbrege').innerHTML = xhr.responseText;
							document.getElementById('nomAbrege').value = xhr.responseText;
						}
					}

					xhr.addEventListener("readystatechange", Lire, false);
					xhr.send(null);
				}
			}
    	</script>
    </head>
	<body>
    	<style type="text/css">.error{color: red}</style>
    	<h3> Veuillez remplir tous les champs pour l'ajout d'un sponsor : </h3>

    	<p><span class="error" >* champs requis </span></p>
		<form name="formAjoutSponsor" action="" method="post">
			
    		<div>
        		<label> Nom exacte : </label>
				<input type = text name = "nom" id = "nom" value ="<?php afficherNom();?>" placeholder="Saisir" required onblur="chargerNom(document.getElementById('nom'))">
				<span class="error">* </span>
				<span class="error" id="nomErreur"></span>
    		</div>
    			<br>
    			<br>

    		<div>
        		<label> Nom abrégé :</label>
        		<input type="text" name = "nomAbrege" id ="nomAbrege" value ="<?php afficherNomAbrege() ?>" placeholder="Saisir" required> <?php //afficherPrenom();?> <!-- c'était de le value -->
        		<span class="error">* </span>
        		<span class="error" id="prenomErreur"></span>
    		</div>
			 	<br>
			 	<br>

			<div>
			 	<label>Année de création :</label>    			
        		<input type="text" name ="dateC" value="" id = "dateC" placeholder="Saisir"> <?php //afficherDateN();?> <!-- c'était de le value -->
    		</div>
				<br>
				<br>

			<select required name="nationalite">
				<option value ="">Nationalité</option>
				<?php remplirOption($tab,$nbLignes); ?>
			</select>
			<span class="error">* </span>
			<?php ajoutSelection();?>
				<br>
				<br>
				<input type="submit" name="verifier" value="Valider" > 
				<input type="reset">
			<br>
			<!-- <span class="error" id ="MessErreur"></span> -->
			
		</form>
		<!-- <span class="error"> <?php afficherTexteFinal(); ?> </span> -->
  </body>
</html>


<!-- question : est-ce que faut faire en php le fait que si pas tout rempli alors on efface pas tout      resolu -->

<!-- Penser à régler probleme de nom et prenom identiques mais nationamité different qui devrait s'insérer dans la base et ce n'est pas le cas  -->